# Bot ????????????

## Bot ?????

### OpenAPI Bot?????????
- ???`openapiBot`?? `packages/types/src/model/user.ts`??
- ??/???`openapi.bot.getOrCreateBotAccount` -> ????? `user.ensureOpenapiBot`?`server/services/openapi/bot.service.ts`?`server/services/core/user/user.service.ts`??
- ???`openapi.bot.login`?????? JWT ? bot ?????
- ?????**?????????????**?? `server/services/core/chat/message.service.ts` ?????
- ??????? `chat.inbox.append` ????????? `openapiBot`????? payload ? HTTP POST ???????? `bot.callbackUrl`??? `X-TC-Payload-Type: inbox` ???`server/services/openapi/bot.service.ts`?

### Plugin Bot???????
- ???`pluginBot`?
- ??/???`user.ensurePluginBot`?`server/services/core/user/user.service.ts`?????? `<botId>@tailchat-plugin.com`?
- ?????**??????**?????????????????? `server/services/core/chat/message.service.ts`??
- ???????????????????????????????

## ??????????

### ?????Web?
- ???? `manifest.json` ?????? `client/web/types/global.d.ts`??
- ???? `url` ?? `/plugins/<name>/index.js`?
- ??????? `client/web/registry.json`?

### ?????
- ?????`server/plugins/<pluginName>/`?
- ?????`server/scripts/installPlugin.js` ????????? manifest ?? `server/public/registry-be.json`?

