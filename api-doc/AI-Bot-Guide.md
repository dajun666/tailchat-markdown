# AI Bot ?????OpenAPI + OpenAI ???

> ????????? Bot ?????? -> ?? OpenAI -> ?????

## 1) ????? OpenAPI ??
- ?? `openapi.app.create` ?????
- ?? `openapi.app.setAppCapability` ?? `bot` ???
- ?? `openapi.app.setAppBotInfo` ?? `callbackUrl`???????????

## 2) ?? Bot Token ???
- Token ?????`md5(appId + appSecret)`?? `server/services/openapi/app.service.ts` ? `authToken`??
- ?? `openapi.bot.login` ?? JWT?????? `X-Token: <jwt>`?

## 3) ? Bot ????
- ?? `openapi.integration.addBotUser` ? bot ???????
- ???OpenAPI Bot ?????????????

## 4) ????????
- ? `chat.inbox.append` ?????????? `callbackUrl` POST ?? payload?
- ????? `X-TC-Payload-Type: inbox`?

## 5) ????
- ?? `chat.message.sendMessage`??????
  - `converseId`??? ID?
  - `groupId`????????
  - `content`??????
  - `plain`???????
  - `meta`????????

## 6) ?? OpenAI???????????
- ? `callbackUrl` ????
  1) ????????????
  2) ????????? OpenAI API?
  3) ??????? `chat.message.sendMessage` ???

## ?????????SDK ???
- `client/packages/tailchat-client-sdk/src/openapi/client/base.ts` ???
  - `POST /api/openapi/bot/login`
  - `POST /api/<action>`?? `chat.message.sendMessage`?

